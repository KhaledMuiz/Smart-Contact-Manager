<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Contact Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- HEADER -->
<header class="header">
    <div class="logo">
        <i class="fa-solid fa-address-book"></i>
        <span>Smart Contact Manager</span>
    </div>
    <nav class="navbar">
        <div class="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <ul class="nav-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="signup.html">Sign Up</a></li>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="contacts.html">Contacts</a></li>
        </ul>
    </nav>
</header>

    <!-- HERO -->
    <section class="hero">
        <div class="hero-text fade-in-up">
            <h1>Connect with Ease</h1>
            <p>Discover a modern contact manager designed to securely store and manage your VIP contacts effortlessly.
            </p>
            <a href="login.html" class="btn">Get Started</a>
        </div>
        <div class="hero-img fade-in-right">
            <img src="/assets/images/cv,1.jpg" alt="Contact illustration">
        </div>
    </section>

    <!-- FEATURES -->
    <section id="features" class="features animate-on-scroll">
        <h2>Why Choose Our Service</h2>
        <div class="grid stagger">
            <div class="card"><i class="fas fa-user-friends"></i>
                <h3>User-Friendly</h3>
                <p>Simple and intuitive interface for everyone.</p>
            </div>
            <div class="card"><i class="fas fa-lightbulb"></i>
                <h3>Innovative</h3>
                <p>Powered by cutting-edge technology.</p>
            </div>
            <div class="card"><i class="fas fa-bolt"></i>
                <h3>Efficient</h3>
                <p>Save time with automation and smart tools.</p>
            </div>
            <div class="card"><i class="fas fa-shield-alt"></i>
                <h3>Reliable</h3>
                <p>Secure, stable, and always accessible.</p>
            </div>
        </div>
    </section>

    <!-- INFO -->
    <section class="info animate-on-scroll">
        <div class="info-row">
            <div class="info-text">
                <h2>Easy Access</h2>
                <p>Manage your contacts on any device, anytime, anywhere.</p>
            </div>
            <div class="info-img"><img src="/assets/images/asd.png" alt="Access"></div>
        </div>
        <div class="info-row reverse">
            <div class="info-text fade-in-left">
                <h2>Secure Storage</h2>
                <p>Your data is encrypted and backed up in the cloud.</p>
            </div>
            <div class="info-img fade-in-right"><img src="/assets/images/secn.jpg" alt="Security"></div>
        </div>
        <div class="info-row">
            <div class="info-text fade-in-left">
                <h2>Quick Management</h2>
                <p>Import, edit, and organize your contacts with ease.</p>
            </div>
            <div class="info-img fade-in-right"><img src="/assets/images/mng.jpg" alt="Management"></div>
        </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="testimonials animate-on-scroll">
        <h2>What Clients Say</h2>
        <div class="grid stagger">
            <div class="testimonial">
                <p>"This tool changed the way I manage my business contacts!"</p>
                <h4>- DR: Abiy Ahmed</h4>
            </div>
            <div class="testimonial">
                <p>"So easy to use and very secure."</p>
                <h4>- Mr: Donald Trump</h4>
            </div>
            <div class="testimonial">
                <p>"Efficient, reliable, and innovative. Highly recommended."</p>
                <h4>- Ato Getachew</h4>
            </div>
        </div>
    </section>

    <!-- CONTACT -->
    <section class="contact animate-on-scroll">
        <h2>Get in Touch</h2>
        <div class="contact-container">
            <form class="contact-form" id="contactForm">
                <input type="text" id="firstName" placeholder="First Name" required>
                <input type="text" id="lastName" placeholder="Last Name" required>
                <input type="email" id="email" placeholder="Email" required>
                <input type="tel" id="phone" placeholder="Phone">
                <textarea id="message" placeholder="Your Message"></textarea>
                <button type="submit" class="btn">Submit</button>
            </form>
            <div class="contact-info">
                <p><i class="fas fa-envelope"></i> support@smartcontact.com</p>
                <p><i class="fas fa-phone"></i> +251 947 3220 34</p>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2025 Smart Contact Manager | Intern Project</p>
    </footer>

    <script src="js/client.js"></script>
    <script>
          const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');

            // Function to update navbar based on login status
            function updateNavbar() {
                const token = localStorage.getItem('token');
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                const navMenuItems = navMenu.querySelectorAll('li');
                navMenuItems.forEach(item => {
                    const link = item.querySelector('a');
                    if (!link) return;
                    const href = link.getAttribute('href');
                    if (token) {
                        // User logged in: hide login and signup, show logout
                        if (href === 'login.html' || href === 'signup.html') {
                            item.style.display = 'none';
                        } else if (href === '#logout') {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'block';
                        }
                    } else {
                        // User not logged in: show login and signup, hide logout
                        if (href === 'login.html' || href === 'signup.html') {
                            item.style.display = 'block';
                        } else if (href === '#logout') {
                            item.style.display = 'none';
                        } else {
                            item.style.display = 'block';
                        }
                    }
                });

                // Add admin link if user is admin
                if (token && user.role === 'admin') {
                    if (!document.querySelector('a[href="admin.html"]')) {
                        const adminLi = document.createElement('li');
                        const adminLink = document.createElement('a');
                        adminLink.href = 'admin.html';
                        adminLink.textContent = 'Admin';
                        // Insert before logout
                        const logoutLi = document.querySelector('a[href="#logout"]').parentElement;
                        navMenu.insertBefore(adminLi, logoutLi);
                    }
                }
            }

        // Add logout menu item dynamically
        function addLogoutMenuItem() {
            const logoutLi = document.createElement('li');
            const logoutLink = document.createElement('a');
            logoutLink.href = '#logout';
            logoutLink.textContent = 'Logout';
            logoutLink.style.cursor = 'pointer';
            logoutLink.addEventListener('click', () => {
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                window.location.href = 'login.html';
            });
            logoutLi.appendChild(logoutLink);
            navMenu.appendChild(logoutLi);
        }

        addLogoutMenuItem();
        updateNavbar();

        hamburger.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            hamburger.classList.toggle('active');
        });

        
                // === Animate on Scroll using IntersectionObserver ===
                const animatedElements = document.querySelectorAll(".animate-on-scroll, .stagger");

                const observerOptions = {
                    threshold: 0.15,
                    rootMargin: "0px 0px -50px 0px"
                };

                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach((entry, index) => {
                        if (!entry.isIntersecting) {
                            entry.target.classList.remove("visible");
                            return;
                        }
                        setTimeout(() => {
                            entry.target.classList.add("visible");
                        }, index * 100); // Staggered delay
                        // Do not unobserve to allow re-animation on scroll or refresh
                        // observer.unobserve(entry.target);
                    });
                }, observerOptions);

                animatedElements.forEach(el => observer.observe(el));

                // Function to check and apply visibility
                function checkVisibility() {
                    animatedElements.forEach(el => {
                        const rect = el.getBoundingClientRect();
                        if (rect.top < window.innerHeight && rect.bottom >= 0) {
                            el.classList.add('visible');
                        } else {
                            el.classList.remove('visible');
                        }
                    });
                }

                // Check initial visibility on load
                window.addEventListener('load', () => {
                    checkVisibility();
                });

                // Re-trigger animations on scroll to repeat
                window.addEventListener('scroll', checkVisibility);

                // === Parallax effect for hero image ===
                window.addEventListener('scroll', () => {
                    const scrolled = window.pageYOffset;
                    const rate = scrolled * -0.3;
                    const heroImg = document.querySelector('.hero-img img');
                    if (heroImg) {
                        heroImg.style.transform = `translateY(${rate}px) scale(1.05)`;
                    }
                });

                // === Hero load animation ===
                window.addEventListener("load", () => {
                    document.querySelector(".hero-text").classList.add("fade-in-left");
                    document.querySelector(".hero-img").classList.add("fade-in-right");
                });

                // === Button ripple effect (modern touch) ===
                document.querySelectorAll(".btn").forEach(btn => {
                    btn.addEventListener("click", function (e) {
                        const circle = document.createElement("span");
                        circle.classList.add("ripple");
                        const rect = btn.getBoundingClientRect();
                        circle.style.left = `${e.clientX - rect.left}px`;
                        circle.style.top = `${e.clientY - rect.top}px`;
                        this.appendChild(circle);
                        setTimeout(() => circle.remove(), 600);
                    });
                });
        

    </script>
    <script>
        document.getElementById('contactForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const message = document.getElementById('message').value.trim();

            try {
                const response = await fetch('/api/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ firstName, lastName, email, phone, message })
                });
                const data = await response.json();
                if (data.success) {
                    alert(data.message);
                    document.getElementById('contactForm').reset();
                } else {
                    alert('Failed to send message. Please try again later.');
                }
            } catch (error) {
                alert('Error sending message. Please try again later.');
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
